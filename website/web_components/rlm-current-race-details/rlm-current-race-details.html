<link rel="import" href="/bower_components/polymer/polymer.html" />
<link rel="import" href="/bower_components/paper-styles/typography.html" />
<link rel="import" href="/bower_components/paper-styles/shadow.html" />
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout-classes.html" />
<link rel="import" href="/bower_components/iron-collapse/iron-collapse.html" />
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html" />
<link rel="import" href="/bower_components/paper-card/paper-card.html" />
<link rel="import" href="/shared-styles.html" />

<dom-module id="rlm-current-race-details">
    <template>
        <style include="shared-styles iron-flex iron-flex-alignment">
            :host {
                display: block;
                padding: 10px;
            }
        </style>

        <custom-style>
            <style is="custom-style">
                .paper-font-title { @apply --paper-font-title; }
                .paper-font-body2 { @apply --paper-font-body2; }
                .paper-font-body1 { @apply --paper-font-body1; }
                .paper-font-display1 { @apply --paper-font-display1; }
                .paper-font-display4 { @apply --paper-font-display4; }
                .paper-font-headline { @apply --paper-font-headline; }
                .paper-font-subhead { @apply --paper-font-subhead; }
                .card { margin: 5px; padding: 5px 16px; }
                .lane-number-column { width: 75px; }
                .title-row { margin: 0px 21px; }

                .car-column {
                    @apply --layout-flex;
                    min-width: 0;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                }

                .car-name {
                    @apply --paper-font-title;
                    white-space: normal;
                }
                .time-column {
                    width: 75px;
                    @apply --paper-font-body2;
                    text-align: center;
                }

                .position-column {
                    width: 75px;
                    @apply --paper-font-body2;
                    text-align: center;
                }

                .points-column {
                    width: 75px;
                    @apply --paper-font-body2;
                    text-align: center;
                }
            </style>
        </custom-style>
        <div class="layout vertical">
            <div class="layout flex">
                <div class="layout horizontal center-justified">
                    <div class="flex self-center paper-font-display1" style="text-align: center; line-height: 120px; padding-bottom: 30px;">
                        Race {{currentRace.raceNum}}
                    </div>
                    <div class="self-center paper-font-display4" style="padding-bottom: 30px;">
                        Lining Up
                    </div>
                </div>
            </div>
            <div class="layout vertical">
                <div class="layout horizontal center">
                    <div class="lane-number-column"></div>
                    <div class="layout horizontal flex center title-row">
                        <div class="paper-font-body2 flex">Car</div>
                        <div class="time-column">Time</div>
                        <div class="position-column">Position</div>
                        <div class="points-column">Points</div>
                    </div>
                </div>
                <template is="dom-repeat" items="{{currentRace.laneAssignments}}" as="laneAssignment">
                    <div class="layout horizontal center">
                        <div class="lane-number-column paper-font-headline">Lane {{laneAssignment.lane}}</lane></div>
                        <div class="card layout horizontal flex center">
                            <div class="car-column">
                                <div class="car-name layout flex wrap">{{laneAssignment.car.name}}</div>
                                <div class="paper-font-body1">{{laneAssignment.car.owner}}</div>
                            </div>
                            <div class="time-column">{{laneAssignment.elapsedTime}} sec</div>
                            <div class="position-column">{{laneAssignment.position}}</div>
                            <div class="points-column">{{laneAssignment.points}}</div>
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </template>
</dom-module>
<script type="text/javascript" src="/models/tournament.js"></script>
<script type="text/javascript" src="/models/lane-assignment.js"></script>
<script type="text/javascript" src="rlm-current-race-details.js"></script>
